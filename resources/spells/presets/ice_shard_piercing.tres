[gd_resource type="Resource" script_class="SpellData" load_steps=5 format=3 uid="uid://spell_ice_shard_piercing"]

[ext_resource type="Script" path="res://resources/spells/spell_data.gd" id="1_spell"]
[ext_resource type="Script" path="res://resources/spells/effects/damage_effect.gd" id="2_damage"]
[ext_resource type="Script" path="res://resources/spells/effects/status_effect.gd" id="3_status"]
[ext_resource type="Script" path="res://resources/spells/effects/damage_effect.gd" id="4_shatter"]

[sub_resource type="Resource" id="damage_effect_1"]
script = ExtResource("2_damage")
effect_type = 0
effect_name = "Piercing Ice"
description = "Sharp ice shard that pierces through enemies"
target_type = 0
delay = 0.0
duration = 0.0
base_damage = 35.0
damage_type = 1  ; MAGICAL
element = 2  ; ICE
damage_variance = 0.1
crit_multiplier = 3.0  ; High crit for precision shot
knockback_force = 2.0
knockback_up = 0.0

[sub_resource type="Resource" id="shatter_damage_1"]
script = ExtResource("4_shatter")
effect_type = 0
effect_name = "Ice Shatter"
description = "Exploding ice fragments on final impact"
target_type = 0
delay = 0.0
duration = 0.0
base_damage = 15.0
damage_type = 1  ; MAGICAL
element = 2  ; ICE
damage_variance = 0.15
crit_multiplier = 1.5
knockback_force = 1.0
knockback_up = 0.3

[sub_resource type="Resource" id="status_effect_1"]
script = ExtResource("3_status")
effect_type = 1
effect_name = "Frozen"
description = "Slows and eventually freezes the target"
target_type = 0
delay = 0.0
duration = 0.0
status = 2  ; FROZEN
status_duration = 2.0
status_strength = 1.0
stat_to_modify = 6  ; MOVE_SPEED
stat_modifier = -0.75
is_percentage = true
dot_damage = 2.0
dot_interval = 0.5
dot_element = 2  ; ICE

[sub_resource type="Resource" id="status_effect_2"]
script = ExtResource("3_status")
effect_type = 1
effect_name = "Frostbite"
description = "Reduces attack speed and increases ice damage taken"
target_type = 0
delay = 0.0
duration = 0.0
status = 8  ; DEBUFFED
status_duration = 4.0
status_strength = 1.0
stat_to_modify = 7  ; ATTACK_SPEED
stat_modifier = -0.3
is_percentage = true
dot_damage = 0.0
dot_interval = 0.0
dot_element = 0

[resource]
script = ExtResource("1_spell")
spell_name = "Ice Shard"
description = "Fires a razor-sharp icicle that pierces through multiple enemies, slowing and potentially freezing them solid."
element = 2  ; ICE
magika_cost = 30.0
cooldown = 1.5
cast_time = 0.0
can_move_while_casting = true
can_be_interrupted = true
delivery_type = 1  ; PROJECTILE
range = 60.0
target_type = 0  ; ENEMY
projectile_speed = 45.0  ; Very fast
projectile_count = 1
projectile_spread = 0.0
projectile_gravity = 0.0  ; No gravity, flies straight
projectile_homing = 0.0
projectile_pierce = 4  ; Pierces through 4 enemies
projectile_bounce = 0
projectile_lifetime = 3.0
aoe_radius = 2.0  ; Small shatter explosion on final hit
aoe_falloff = true
aoe_delay = 0.0
aoe_persist_duration = 0.0
effects = [SubResource("damage_effect_1"), SubResource("shatter_damage_1"), SubResource("status_effect_1"), SubResource("status_effect_2")]
damage_multiplier = 1.0
cost_multiplier = 1.0
cooldown_multiplier = 1.0
range_multiplier = 1.0
aoe_multiplier = 1.0