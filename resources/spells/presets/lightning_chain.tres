[gd_resource type="Resource" script_class="SpellData" load_steps=5 format=3 uid="uid://spell_lightning_chain"]

[ext_resource type="Script" path="res://resources/spells/spell_data.gd" id="1_spell"]
[ext_resource type="Script" path="res://resources/spells/effects/damage_effect.gd" id="2_damage"]
[ext_resource type="Script" path="res://resources/spells/effects/status_effect.gd" id="3_status"]
[ext_resource type="Script" path="res://resources/spells/effects/damage_effect.gd" id="4_chain_damage"]

[sub_resource type="Resource" id="damage_effect_1"]
script = ExtResource("2_damage")
effect_type = 0
effect_name = "Primary Lightning"
description = "Initial lightning bolt damage"
target_type = 0
delay = 0.0
duration = 0.0
base_damage = 40.0
damage_type = 1  ; MAGICAL
element = 3  ; LIGHTNING
damage_variance = 0.25
crit_multiplier = 2.5
knockback_force = 1.0
knockback_up = 0.0

[sub_resource type="Resource" id="chain_damage_1"]
script = ExtResource("4_chain_damage")
effect_type = 0
effect_name = "Chain Lightning"
description = "Damage that chains to nearby enemies"
target_type = 0
delay = 0.1
duration = 0.0
base_damage = 35.0
damage_type = 1  ; MAGICAL
element = 3  ; LIGHTNING
damage_variance = 0.2
crit_multiplier = 2.0
knockback_force = 0.5
knockback_up = 0.0

[sub_resource type="Resource" id="status_effect_1"]
script = ExtResource("3_status")
effect_type = 2
effect_name = "Electrified"
description = "Stuns and increases damage taken"
target_type = 0
delay = 0.0
duration = 0.0
status = 4  ; STUNNED
status_duration = 1.0
status_strength = 1.0
stat_to_modify = 6  ; MOVE_SPEED
stat_modifier = -0.5
is_percentage = true
dot_damage = 3.0
dot_interval = 0.25
dot_element = 3  ; LIGHTNING

[resource]
script = ExtResource("1_spell")
spell_name = "Lightning Chain"
description = "Releases a powerful bolt of electricity that jumps between multiple enemies, stunning and electrocuting all in its path."
element = 3  ; LIGHTNING
magika_cost = 40.0
cooldown = 3.0
cast_time = 0.5
can_move_while_casting = false
can_be_interrupted = true
delivery_type = 7  ; CHAIN
range = 70.0
target_type = 0  ; ENEMY
projectile_speed = 0.0  ; Instant
projectile_count = 1
projectile_spread = 0.0
projectile_gravity = 0.0
projectile_homing = 0.0
projectile_pierce = 0
projectile_bounce = 0
projectile_lifetime = 0.0
aoe_radius = 0.0
chain_count = 5  ; Hits up to 5 additional targets
chain_range = 12.0  ; Search radius for next target
chain_damage_falloff = 0.85  ; Each chain does 85% of previous damage
effects = [SubResource("damage_effect_1"), SubResource("chain_damage_1"), SubResource("status_effect_1")]
damage_multiplier = 1.0
cost_multiplier = 1.0
cooldown_multiplier = 1.0
range_multiplier = 1.0
aoe_multiplier = 1.0